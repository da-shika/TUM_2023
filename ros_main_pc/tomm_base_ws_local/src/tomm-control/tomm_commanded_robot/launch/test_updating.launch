<?xml version="1.0"?>
<launch>
  
  <!-- empty strings are not allowed for namespace ! -> "/" -->
  <arg name="ns" default="/tomm" />
  <arg name="gui" default="false" />
  <arg name="list" default="[joint_states]"/>
  <arg name="robot" default="full"/>

  <!-- Robot description -->
  <param name="robot_description" textfile="$(find tomm_bringup)/robots/tomm.urdf"/>

  <!-- Joint limits -->
  <rosparam command="load" file="$(find tomm_description)/config/joint_limits.yaml"/>

  <!-- Load all parameter -->
  <group ns="$(arg ns)">

    <!-- control parameters -->
    <rosparam command="load" file="$(find tomm_bringup)/configs/control_sim.yaml" subst_value="True"/> 
   
    <!-- task parameters --> 
    <rosparam command="load" file="$(find tomm_bringup)/configs/tasks.yaml" subst_value="True"/> 

  </group>  

  <!-- Launching the joint state publisher, two options for the joint position generation gui or external source-->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
		<param name="use_gui" value="$(arg gui)"/>
		<rosparam unless="$(arg gui)" param="source_list" subst_value="True">$(arg list)</rosparam>
  </node>

  <!-- Robot state publisher and visualization -->	
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />	

  <!-- test -->
  <node name="test_updating" pkg="tomm_commanded_robot" type="test_updating" output="screen"/>

  <!-- visualize -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find tomm_bringup)/rviz/rviz.rviz" required="true" />

</launch>

